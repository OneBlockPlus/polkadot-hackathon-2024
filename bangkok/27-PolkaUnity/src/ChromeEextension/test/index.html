<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>PolkaUnity Demo</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta property="og:title" content="PolkaUnity Demo">
    <meta property="og:site_name" content="PolkaUnity Demo">
    <meta property="og:type" content="website">
    <meta property="og:image" content="img/1.png" />
    <meta property="og:description" content="PolkaUnity Demo">
    <meta name="twitter:image" content="img/1.png" />
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:image" content="img/1.png" />
    <meta property="twitter:title" content="PolkaUnity">
    <meta property="twitter:description" content="PolkaUnity">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <link rel="bookmark" type="image/x-icon" href="favicon.ico" />
</head>

<body id="body">
    <div id="change"></div>
    <!-- <button id="btn1">sign</button>&nbsp;&nbsp; -->
    <button id="btn11">mint</button>&nbsp;&nbsp;
    <!-- <button id="btn2">Store Set</button>&nbsp;&nbsp;
    <button id="btn3">Store Get</button>&nbsp;&nbsp;
    <button id="btn4">Test</button>&nbsp;&nbsp; -->
    <button id="btn5">Transfer</button>&nbsp;&nbsp;
    <div>
        <img src="img/1.png" alt="PolkaUnity Demo" />
    </div>
    <script charset="utf-8" type="module">
        import api from "./js/sdk.js";
        import store from "./js/store.js";
        import init from "./js/polkadot.js";
        async function mytest1(e) {
            console.log("click");

            let res = await api.sign();
            console.log(res);
            alert(res.msg);

            console.log("click ok");
        }
        async function mytest11(e) {
            console.log("click");

            let res = await api.mint();
            console.log(res);
            alert(res.msg);

            console.log("click ok");
        }
        async function mytest2(e) {
            console.log("click2");

            let res = await send("store-set", { key: "hi", value: "haha" + new Date().valueOf() });
            console.log(res);
            console.log("click ok");
        }
        async function mytest3(e) {
            console.log("click3");

            let res = await send("store-get", { key: "hi" });
            console.log(res);
            console.log("click ok");
        }
        async function mytest4(e) {
            console.log("click4");

            store("from test/index.html");
            console.log("click ok");
        }
        async function mytest5(e) {
            console.log("click5");
            let res = await api.transfer();
            return;
            // let { api, keyring, extension, util } = await init();
            // let { web3Accounts, web3Enable, web3FromAddress } = extension;
            // const allInjected = await web3Enable('my cool dapp');
            // const allAccounts = await web3Accounts();
            // const SENDER = allAccounts[0].address;
            // const injector = await web3FromAddress(SENDER);
            // api.tx.balances
            //     .transferKeepAlive('5C5555yEXUcmEJ5kkcCMvdZjUo7NGJiQJMS7vZXEeoMhj3VQ', 123456)
            //     .signAndSend(SENDER, { signer: injector.signer }, (status) => {
            //         console.log(`Current status is ${status}`);
            //     });
            console.log("click5 ok");
        }
        // document.getElementById("btn1").addEventListener("click", mytest1);
        document.getElementById("btn11").addEventListener("click", mytest11);
        // document.getElementById("btn2").addEventListener("click", mytest2);
        // document.getElementById("btn3").addEventListener("click", mytest3);
        // document.getElementById("btn4").addEventListener("click", mytest4);
        document.getElementById("btn5").addEventListener("click", mytest5);
    </script>
</body>

</html>