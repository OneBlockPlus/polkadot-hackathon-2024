import{c as p,i as x,j as C,m as F,o as I}from"./Message-BmumhDZC.js";function B(t,n,f,e,i){e===void 0&&(e=0),i===void 0&&(i=!1);var u=n.schedule(function(){f(),i?t.add(this.schedule(null,e)):this.unsubscribe()},e);if(t.add(u),!i)return u}function N(t,n,f,e,i,u,s,w){var o=[],r=0,b=0,v=!1,h=function(){v&&!o.length&&!r&&n.complete()},g=function(a){return r<e?l(a):o.push(a)},l=function(a){r++;var m=!1;x(f(a,b++)).subscribe(p(n,function(c){n.next(c)},function(){m=!0},void 0,function(){if(m)try{r--;for(var c=function(){var d=o.shift();s||l(d)};o.length&&r<e;)c();h()}catch(d){n.error(d)}}))};return t.subscribe(p(n,g,function(){v=!0,h()})),function(){}}function k(t,n,f){return f===void 0&&(f=1/0),C(n)?k(function(e,i){return F(function(u,s){return n(e,u,i,s)})(x(t(e,i)))},f):(typeof n=="number"&&(f=n),I(function(e,i){return N(e,i,t,f)}))}export{B as e,k as m};
