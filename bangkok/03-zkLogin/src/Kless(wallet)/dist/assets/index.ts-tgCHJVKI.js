import{P as a,B as m}from"./PortStream-DB5rsuAT.js";import{W as p}from"./WindowMessageStream-BhNzlv8e.js";import{t as d}from"./Message-BmumhDZC.js";import"./mergeMap-CRZcgDlV.js";function r(e,t){const n=a.connectToBackgroundService("kless_content<->background");t&&n.sendMessage(t),n.onMessage.subscribe(o=>{e.send(o)});const i=e.messages.subscribe(o=>{n.sendMessage(o)});n.onDisconnect.subscribe(o=>{i.unsubscribe(),r(e)})}function u(){const e=new p("kless_content-script","kless_in-page");e.messages.pipe(d(1)).subscribe(t=>{r(e,t)})}const l="/assets/index.ts-OlX_apVk.js";console.log("Content script loaded");console.log("Injecting dapp interface");const s=document.createElement("script");s.async=!1;s.setAttribute("src",m.runtime.getURL(l));s.type="module";const c=document.head||document.documentElement;c.insertBefore(s,c.firstElementChild);c.removeChild(s);u();
